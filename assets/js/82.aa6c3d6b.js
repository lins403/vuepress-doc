(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{482:function(s,t,a){"use strict";a.r(t);var n=a(43),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"number"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#number"}},[s._v("#")]),s._v(" Number")]),s._v(" "),a("h2",{attrs:{id:"浮点数精度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#浮点数精度"}},[s._v("#")]),s._v(" 浮点数精度")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("JavaScript 中所有数字，包括整数和小数都只有一种类型，即 Number类型")])]),s._v(" "),a("li",[a("p",[s._v("javascript以 "),a("u",[s._v("64 位双精度浮点数")]),s._v("存储所有Number类型值")])])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/nefe/number-precision",target:"_blank",rel:"noopener noreferrer"}},[s._v("number-precision: 🚀1K tiny"),a("OutboundLink")],1)]),s._v(" "),a("ul",[a("li",[s._v("实现原理是将浮点数转为整数进行运算（基于「乘法运算」，转成字符串，将小数点replace掉）")])]),s._v(" "),a("h3",{attrs:{id:"表示"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#表示"}},[s._v("#")]),s._v(" 表示")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("Sign bit: 1 bit")])]),s._v(" "),a("li",[a("p",[s._v("Exponent: 11 bits")])]),s._v(" "),a("li",[a("p",[s._v("Significand precision: 53 bits (52 explicitly stored)")])])]),s._v(" "),a("h4",{attrs:{id:"🌰"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🌰"}},[s._v("#")]),s._v(" 🌰")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27.5")]),s._v(" 转换为二进制 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11011.1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11011.1")]),s._v(" 转换为科学记数法 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.10111")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n\n符号位 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("为1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("正数"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n指数位 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("为")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" 指数偏移量"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1023")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("，即"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1027")]),s._v("，因为它是十进制的需要转换为二进制即 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000000011")]),s._v("\n小数部分为"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10111")]),s._v("，补够"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v("位即： "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1011")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v("\n\n符号位"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v("指数位"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("小数部分")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("阶数"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000000011")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("011")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0000")]),s._v("\n")])])]),a("h3",{attrs:{id:"极限值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#极限值"}},[s._v("#")]),s._v(" 极限值")]),s._v(" "),a("p",[s._v("安全整数")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("Number.MAX_SAFE_INTEGER")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("Number.MIN_SAFE_INTEGER")])])])]),s._v(" "),a("p",[a("u",[s._v("在此范围内的整数和双精度浮点数是一一对应的")]),s._v("，不会存在一个整数有多个浮点数表示的情况，当然也不会存在一个浮点数对应多个整数的情况。")]),s._v(" "),a("p",[a("code",[s._v("Number.EPSILON")]),s._v("：ES6，极小的常量，目的在于为浮点数计算设置一个误差范围，如果误差能够小于Number.EPSILON，我们就可以认为结果是可靠的。")]),s._v(" "),a("p",[a("code",[s._v("Number.isFinite()")])]),s._v(" "),a("h3",{attrs:{id:"精度丢失"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#精度丢失"}},[s._v("#")]),s._v(" 精度丢失")]),s._v(" "),a("p",[s._v("计算机存储双精度浮点数，需要先把十进制数转换为二进制的科学记数法的形式，然后计算机以自己的规则 {符号位+(指数位+指数偏移量的二进制)+小数部分} 存储二进制的科学记数法。")]),s._v(" "),a("p",[s._v("因为存储时有位数限制（64位），并且某些十进制的浮点数在转换为二进制数时会出现无限循环，会造成二进制的舍入操作(0舍1入)，当再转换为十进制时就造成了计算误差。")]),s._v(" "),a("h3",{attrs:{id:"拓展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#拓展"}},[s._v("#")]),s._v(" 拓展")]),s._v(" "),a("p",[s._v("浮点数在机内用指数型式表示，分解为："),a("strong",[s._v("数符，尾数，指数符，指数")]),s._v("四部分：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("数符/符号位 (Sign bit)：占 1 位二进制，表示数的正负。")])]),s._v(" "),a("li",[a("p",[s._v("指数符：占 1 位二进制，表示指数的正负。")])]),s._v(" "),a("li",[a("p",[s._v("尾数：表示浮点数有效数字，0.xxxxxxx, 但不存开头的 0 和点。")])]),s._v(" "),a("li",[a("p",[s._v("指数 (Exponent)：存指数的有效数字。")])])]),s._v(" "),a("p",[s._v("知道了这四部分的占位，按二进制估计大小范围，再换算为十进制，就是你想知道的数值范围。")]),s._v(" "),a("h4",{attrs:{id:"单精度浮点数-float"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单精度浮点数-float"}},[s._v("#")]),s._v(" 单精度浮点数（"),a("code",[s._v("float")]),s._v("）")]),s._v(" "),a("ul",[a("li",[s._v("在内存中占 4 个字节")]),s._v(" "),a("li",[s._v("数符加尾数占 24 位，指数位（指数符加指数）占 8 位，指数偏移量 27-1")]),s._v(" "),a("li",[s._v("2^23 = 8388608，一共七位，这意味着最多能有 7 位有效数字，但绝对能保证的为 6 位，也即float的精度为 6~7 位有效数字")])]),s._v(" "),a("h4",{attrs:{id:"双精度浮点数-double"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#双精度浮点数-double"}},[s._v("#")]),s._v(" 双精度浮点数（"),a("code",[s._v("double")]),s._v("）")]),s._v(" "),a("ul",[a("li",[s._v("在内存中占 8 个字节")]),s._v(" "),a("li",[s._v("数符加尾数占 "),a("s",[s._v("48")]),s._v(" 53 位，指数符加指数占 "),a("s",[s._v("16")]),s._v(" 11 位，指数偏移量 210-1")]),s._v(" "),a("li",[s._v("2^52 = 4503599627370496，一共16位，同理，double的精度为15~16 位")])]),s._v(" "),a("h2",{attrs:{id:"number运算"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#number运算"}},[s._v("#")]),s._v(" Number运算")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//true")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//false")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//false")]),s._v("\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("NaN")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("NaN")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//false")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("NaN")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//"number"')]),s._v("\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("parseInt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'16px'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//16")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("parseInt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'110'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//6，二进制")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("parseInt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'110'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//72，八进制")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123.456'")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//123.456")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123.456'")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//123")]),s._v("\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("floor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PI")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//3")]),s._v("\nMath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ceil")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PI")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//4")]),s._v("\nMath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("round")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PI")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//3")]),s._v("\nMath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PI")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("toFixed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//'3.142'")]),s._v("\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// '12'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// -1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 0.5")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);