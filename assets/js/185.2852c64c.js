(window.webpackJsonp=window.webpackJsonp||[]).push([[185],{583:function(t,s,a){"use strict";a.r(s);var n=a(43),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"vue"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue"}},[t._v("#")]),t._v(" Vue")]),t._v(" "),a("ul",[a("li",[t._v("聚焦视图层")]),t._v(" "),a("li",[t._v("响应式数据绑定")]),t._v(" "),a("li",[t._v("组件系统")])]),t._v(" "),a("h2",{attrs:{id:"基础"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基础"}},[t._v("#")]),t._v(" 基础")]),t._v(" "),a("h3",{attrs:{id:"数据绑定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据绑定"}},[t._v("#")]),t._v(" 数据绑定")]),t._v(" "),a("p",[t._v("js操作DOM，一个是消耗高影响性能，另一个是导致js代码中包含过多HTML代码，也就是会导致视图代码和业务逻辑紧密耦合；")]),t._v(" "),a("p",[t._v("vue通过MVVM的模式，分离为视图层View和数据层Model。ViewModel层实现了数据的双向绑定，我们只需要提供视图层需要的数据，vue会自动帮我们更新DOM。（分离视图代码和业务逻辑，数据驱动DOM）")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("{{}}")]),t._v("  Mustache语法插入表达式值")]),t._v(" "),a("li",[a("code",[t._v("v-bind")]),t._v("：动态更新HTML元素的属性，数据变化时会重新渲染")])]),t._v(" "),a("h3",{attrs:{id:"指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#指令"}},[t._v("#")]),t._v(" 指令")]),t._v(" "),a("p",[t._v("在结点上使用 "),a("code",[t._v("v-pre")]),t._v(" ，会跳过这个元素和它的子元素的编译过程。例如 {{}} 就不会被编译")]),t._v(" "),a("p",[a("code",[t._v("v-bind")]),t._v("指令可以传入一个表达式，它会使用表达式计算出的最终字符串，但绑定class和style时可以比较特殊。")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- v-bind动态绑定class，绑定style的方式也一样 --\x3e")]),t._v("\n\n1. 对象语法\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("common"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("active"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(":isActive, "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("disabled"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(":isDisable}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\ndata(){ \n\treturn{\t\n    isActive:true, \n    isDisable:false\n  }\n}\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!------------------------\x3e")]),t._v("\n2. 数组语法\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("common"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("[activeCls, disableCls]"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("[isActive? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("active"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(": "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("]"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("使用三元表达式"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\t\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("[ {"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("active"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(": isActive}, disableCls ]"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("数组中使用对象语法，应用多个class对象"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\ndata(){ \n\treturn{\t\n    activeCls: 'btn-active', \n    disableCls: 'btn-disabled',\n\t\tisActive: 'true'\n  }\n}\n")])])]),a("h4",{attrs:{id:"v-cloak"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v-cloak"}},[t._v("#")]),t._v(" "),a("code",[t._v("v-cloak")])]),t._v(" "),a("ul",[a("li",[t._v("斗篷、遮盖物，用于解决初始化慢导致页面闪动")]),t._v(" "),a("li",[t._v("使用插值语法时，页面上显示的是原始值，例如"+t._s(t.message)+"，直到vue创建完实例并编译模板时，DOM才会被更新，更新的过程会造成屏幕闪动")]),t._v(" "),a("li",[t._v("在编译前先隐藏未编译的Mustache标签，编译结束后将v-cloak移除")])]),t._v(" "),a("div",{staticClass:"language-scss extra-class"},[a("pre",{pre:!0,attrs:{class:"language-scss"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 避免使用插值语法时屏幕闪动")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[v-cloak]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("display")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" none"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("但是在工程化的项目里，例如使用vue-cli和v-router的项目里，HTML结构中只有一个id为app的空div元素，其中的内容都是由路由去挂载不同组件来完成渲染的")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// main.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Vue "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" App "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./App.vue'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" router "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./router'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" store "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./store'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  router"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("h")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("h")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("App"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$mount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#app'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("div",{staticClass:"language-vue extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- App.vue --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("router-view")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("h4",{attrs:{id:"v-model"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v-model"}},[t._v("#")]),t._v(" "),a("code",[t._v("v-model")])]),t._v(" "),a("p",[t._v("语法糖")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-model")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("searchText"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 语法糖，等价于 --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":value")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("searchText"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@input")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("searchText = $event.target.value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("h4",{attrs:{id:"自定义指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义指令"}},[t._v("#")]),t._v(" 自定义指令")]),t._v(" "),a("p",[t._v("我理解本质上就是利用了bind、inserted、update、componentUpdated、unbind这几个钩子，往其中添加自定义的逻辑处理，可以修改数据、控制函数、操作DOM（例如修改el.innerHTML、修改input.value）等等")]),t._v(" "),a("p",[t._v("举例几个应用场景：")]),t._v(" "),a("ol",[a("li",[t._v("定义一个 v-focus 指令用在 input 标签上，在 inserted 钩子中使用 el.focus()，实现元素插入父节点时调用focus自动聚焦输入框。")]),t._v(" "),a("li",[t._v("在 bind 钩子中使用 addEventListener 绑定DOM事件（click、scroll、input、），在 unbind 钩子中使用 removeEventListener 解绑。我觉得最好在unbind上移除事件监听，因为元素如果被以innerHTML等方式覆盖掉的时候，组件没有被销毁，就不会自动移除事件监听。")]),t._v(" "),a("li",[t._v("结合 vuex 使用，例如实现一个 v-permission 用于HTML节点的权限过滤，store中的角色名不包含在传入的角色数组中时，将当前节点从父节点中移除。")])]),t._v(" "),a("h4",{attrs:{id:"条件渲染与列表渲染"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#条件渲染与列表渲染"}},[t._v("#")]),t._v(" 条件渲染与列表渲染")]),t._v(" "),a("p",[t._v("vue在渲染元素时，处于效率考虑，会尽可能地复用已有的元素而并非重新渲染。")]),t._v(" "),a("p",[t._v("如果不想要让vue复用元素，可以使用key属性，key值必须是唯一的")]),t._v(" "),a("p",[a("code",[t._v("v-show")]),t._v("只是简单的 display 属性的切换，无论条件是否为真，都会被编译。所以 v-show 不能用在"),a("code",[t._v("<template>")]),t._v("上")]),t._v(" "),a("h3",{attrs:{id:"事件与修饰符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件与修饰符"}},[t._v("#")]),t._v(" 事件与修饰符")]),t._v(" "),a("h4",{attrs:{id:"event"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#event"}},[t._v("#")]),t._v(" $event")]),t._v(" "),a("div",{staticClass:"language-vue extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://www.youtube.com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("handleClick("),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("coming"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(", $event)"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("打开链接🔗"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\nhandleClick(message, event){\n\tevent.preventDefault()\n}\n")])])]),a("h4",{attrs:{id:"修饰符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修饰符"}},[t._v("#")]),t._v(" 修饰符")]),t._v(" "),a("p",[t._v("通用")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stop\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// event.stopPropagation()")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prevent\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// event.preventDefault()")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("capture\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("self\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// if(event.target!==event.currentTarget) return")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("once\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("enter "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".13")]),t._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// if(event.keyCode!==13) return")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("native\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 添加在自定义组件的事件上，直接监听组件根元素的原生事件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("passive\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 相当于给onscroll事件加了lazy效果")]),t._v("\n")])])]),a("p",[t._v("表单(v-model)")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lazy\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//输入框内容变化时，v-model绑定的数据不会立即更新，要等到失焦的时候，或者按回车以后（如果是lazy，则只监听change事件；没有设置lazy时，还监听input事件）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("number\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//调用parseFloat，解析一个参数并返回一个浮点数")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("trim\n")])])]),a("h3",{attrs:{id:"组件事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件事件"}},[t._v("#")]),t._v(" 组件事件")]),t._v(" "),a("p",[t._v("两种事件类型")]),t._v(" "),a("ol",[a("li",[t._v("DOM事件")]),t._v(" "),a("li",[t._v("自定义事件")])]),t._v(" "),a("p",[t._v("只有组件节点才可以添加自定义事件，并且添加原生 DOM 事件需要使用 "),a("code",[t._v("native")]),t._v(" 修饰符；而普通元素使用 "),a("code",[t._v(".native")]),t._v(" 修饰符是没有作用的，也只能添加原生 DOM 事件。")]),t._v(" "),a("div",{staticClass:"language-vue extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" Child "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 即使子组件没有监听click事件，父组件的@click.native还是能触发")]),t._v("\n  template"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<button @click=\"clickHandler($event)\">'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'click me'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'</button>'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  methods"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clickHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Button clicked!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$emit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'select'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 根元素如果能截胡掉native监听的事件，则事件会被静默。这时可以使用v-on="$listeners"的技巧合并事件监听器')]),t._v("\n  template"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('<div>\n      <child @select="selectHandler" @click.native.prevent="clickHandler" />\n    </div>')]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  methods"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clickHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Child clicked!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Child select!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  components"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Child\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("一个使用"),a("code",[t._v('v-on="$listeners"')]),t._v("的特殊技巧："),a("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/components-custom-events.html#%E5%B0%86%E5%8E%9F%E7%94%9F%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%E5%88%B0%E7%BB%84%E4%BB%B6",target:"_blank",rel:"noopener noreferrer"}},[t._v("将原生事件绑定到组件"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("Vue 提供了一个 "),a("code",[t._v("$listeners")]),t._v(" property，它是一个对象，里面包含了作用在这个组件上的所有监听器。")]),t._v(" "),a("h2",{attrs:{id:"组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件"}},[t._v("#")]),t._v(" 组件")]),t._v(" "),a("p",[t._v("组件之间的数据传递方式")]),t._v(" "),a("ol",[a("li",[t._v("props")]),t._v(" "),a("li",[t._v("组件通信")]),t._v(" "),a("li",[t._v("slot")])]),t._v(" "),a("h3",{attrs:{id:"单向数据流"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单向数据流"}},[t._v("#")]),t._v(" 单向数据流")]),t._v(" "),a("p",[t._v("父组件通过props给子组件传递数据，但是子组件不能直接修改父组件的状态。")]),t._v(" "),a("p",[t._v("子组件不要直接修改props值，因为当父组件重新渲染时，会被父组件的props值覆盖回去。如果props值是个对象，则会修改到父组件的状态，导致父组件也会发生re-render。")]),t._v(" "),a("p",[t._v("从Vue2.x开始才实现了单向的数据流。"),a("code",[t._v(".sync")]),t._v("修饰符是在Vue1.x中引入来支持双向绑定。之所以这样设计，是为了尽可能的将父子组件解耦，避免子组件无意中修改了父组件的状态。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当传入的props是个对象，子组件需要修改这个对象时，")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. 常见方式有二：data中可以使用一个变量来保存然后对这个新变量进行修改，或者使用computed来计算变量；这两种方式都是复制的引用值，修改它们均无异于直接修改props值。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. 如果使用了.sync修饰符，要么在父组件传参时进行解构，要么在子组件中要对对象进行深拷贝；否则使用$emit")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  props"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    post"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("default")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" title"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    author"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'foo'")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      deepObj"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("post"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      obj"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("post"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      str"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("author\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  computed"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("post\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// setter")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("newValue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("created")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$attrs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//$attrs而不是$props")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("post"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("item "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("post"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("deepObj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("post"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// false")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("str "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bar'")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("str"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("author"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// bar foo")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"组件通信"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件通信"}},[t._v("#")]),t._v(" 组件通信")]),t._v(" "),a("p",[t._v("父子、兄弟、跨级")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.")]),t._v(" props "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("events")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" $emit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" $on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" v"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("model "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.")]),t._v(" $parent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" $children\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.")]),t._v(" $attrs "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" $listeners\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.")]),t._v(" ref $refs \n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.")]),t._v(" provide"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("inject\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6.")]),t._v(" webStorage\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.")]),t._v(" eventbus\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.")]),t._v(" vuex\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9.")]),t._v(" Vue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("observable\n")])])]),a("p",[t._v("观察者模式 "),a("code",[t._v("$emit")]),t._v(" "),a("code",[t._v("$on")]),t._v(" "),a("code",[t._v("v-on")])]),t._v(" "),a("p",[t._v("Vue1.x中的 "),a("code",[t._v("$diapath")]),t._v("、"),a("code",[t._v("$broadcast")]),t._v(" 在Vue2.x中已经被废除")]),t._v(" "),a("p",[a("code",[t._v("$refs")]),t._v(" 只在组件渲染完成后才填充，并且它是非响应式的，因此应该避免用在模板或计算属性中。")]),t._v(" "),a("h4",{attrs:{id:"eventbus"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#eventbus"}},[t._v("#")]),t._v(" eventBus")]),t._v(" "),a("p",[t._v("使用一个空的Vue实例作为中央事件总线（bus），可以用作任何组件之间通信的桥梁。")]),t._v(" "),a("p",[t._v("可以扩展bus实例，给它添加data、methods、computed等选项，让组件之间共享数据。")]),t._v(" "),a("h3",{attrs:{id:"slot内容分发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#slot内容分发"}},[t._v("#")]),t._v(" slot内容分发")]),t._v(" "),a("p",[t._v("transclusion，内容分发、嵌入")]),t._v(" "),a("blockquote",[a("p",[t._v("props传递数据、events触发事件、slot内容分发，这三者构成了Vue组件")])]),t._v(" "),a("ul",[a("li",[t._v("分发内容的作用域属于父组件")]),t._v(" "),a("li",[t._v("作用域插槽：让父组件中使用子组件的数据，具体做法是将数据作为属性通过v-bind绑定在子组件的插槽"),a("code",[t._v("slot")]),t._v("上")]),t._v(" "),a("li",[t._v("具名插槽")]),t._v(" "),a("li",[t._v("通过 "),a("code",[t._v("$slots")]),t._v(" 访问 slot，只要父组件有分发内容给子组件，子组件的 "),a("code",[t._v("$slots")]),t._v(" 就会有值，然后使用"),a("code",[t._v("<slot>")]),t._v("来承接内容")])]),t._v(" "),a("h3",{attrs:{id:"组件高级用法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件高级用法"}},[t._v("#")]),t._v(" 组件高级用法")]),t._v(" "),a("ul",[a("li",[t._v("递归组件： "),a("code",[t._v("name")]),t._v(" 选项")]),t._v(" "),a("li",[t._v("内联模板： "),a("code",[t._v("inline-template")]),t._v(" 属性")]),t._v(" "),a("li",[t._v("动态组件： "),a("code",[t._v('<component :is="currentView" />')])]),t._v(" "),a("li",[t._v("异步组件： 只在组件需要渲染时触发工厂函数，并且会缓存解析结果")])]),t._v(" "),a("h3",{attrs:{id:"其它"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其它"}},[t._v("#")]),t._v(" 其它")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("$nextTick")]),t._v(" 与 DOM异步更新机制")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("主线程的执行过程就是一个 tick，而所有的异步结果都是通过 “任务队列” 来调度。 消息队列中存放的是一个个的任务（task）。 规范中规定 task 分为两大类，分别是 macro task 和 micro task，并且每个 macro task 结束后，都要清空所有的 micro task。")])]),t._v(" "),a("li",[a("p",[t._v("异步更新机制，在更新时维护一个异步更新的watcher队列，只是去除重复的watcher，并不是只检查最终的结果。只有computed watcher才会只计算最终结果，来决定是否更新")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 只有第一次点击才会触发beforeUpdate和updated钩子")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleClick")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 只有第一次点击才会触发beforeUpdate和updated钩子")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleClick")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 每次点击都会触发更新的两个钩子")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleClick")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])])]),t._v(" "),a("li",[a("p",[t._v("X-Templates")])]),t._v(" "),a("li",[a("p",[t._v("手动挂载实例")])]),t._v(" "),a("li",[a("p",[t._v("keep-alive")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("<keep-alive>")]),t._v(" 只处理第一个子元素，所以一般和它搭配使用的有 "),a("code",[t._v("component")]),t._v(" 动态组件或者是 "),a("code",[t._v("router-view")])]),t._v(" "),a("li",[t._v("保留组件的状态或者避免重新渲染")]),t._v(" "),a("li",[t._v("只会执行一次完整的生命周期")]),t._v(" "),a("li",[t._v("之后每次只会触发 "),a("code",[t._v("activated")]),t._v(" 和 "),a("code",[t._v("deactivated")]),t._v(" 钩子")]),t._v(" "),a("li",[t._v("通常用来包裹动态组件，如果这个特性存在，则重复创建组件时，会通过缓存机制来快速创建组件")]),t._v(" "),a("li",[a("code",[t._v("<router-view />")]),t._v(" "),a("code",[t._v('<component :is=""')])])])])]),t._v(" "),a("h2",{attrs:{id:"render函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#render函数"}},[t._v("#")]),t._v(" Render函数")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/render-function.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("渲染函数 & JSX — Vue.js"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("Vue2.x 与 Vue1.x 最大的区别在于 2.x 使用了 Virtual DOM 来更新DOM节点，提升渲染性能。以及提供了服务端渲染技术。")]),t._v(" "),a("blockquote",[a("p",[t._v("【对以前学习源码的总结】")]),t._v(" "),a("p",[t._v("new Vue => init => $mount => compile => render => vnode => patch => DOM")]),t._v(" "),a("p",[t._v("创建一个Vue实例时，会进行init初始化，首先merge options，然后再调用 initState 初始化相关属性，将data、props、methods等等option添加到这个vue实例上，然后将实例 mount 挂载到DOM节点上。")]),t._v(" "),a("p",[t._v("在开始挂载前，会先判断是否有template模板，如果有的话就会进行 compile 编译，先 parse 解析成 AST 对象，并且对AST进行 optimize 优化（深度遍历AST树，标记静态属性和静态节点）。然后再 generate 生成对应的 render function，如果没有template的话则会将当前el节点与其后代元素（outerHTML）用于创建一个template模板。")]),t._v(" "),a("p",[t._v("执行编译生成的 render function，通过 createElement 方法生成 VNode，建立起来的整个 VNode 树就是 Virtual DOM。")]),t._v(" "),a("p",[t._v("（TODO：确认一下update和patch的调用时机）如果是第一次渲染，则 patch 方法中直接调用 createElm 方法，基于VNode的信息，调用浏览器的 DOM API 来创建真实 DOM 并完成挂载。")]),t._v(" "),a("p",[t._v("如果在这过程中数据发生变化，则会触发update更新，re-render重新渲染生成新的VNode，patch方法会将新旧 VNode 进行比较，首先通过 "),a("code",[t._v("sameVnode(oldVnode, vnode)")]),t._v("方法判断它们是否是相同的 VNode，来决定走不同的更新逻辑。如果新旧 "),a("code",[t._v("vnode")]),t._v(" 不同，就替换掉已存在的节点，主要分为三步：创建新节点、更新父的占位符节点、")])]),t._v(" "),a("p",[t._v("将模板template解析成 AST 结构的JavaScript对象，通过 render 函数调用 createElement 生成 VNode，通过 diff 算法比较新旧 VNode 然后生成补丁对象，遍历补丁对象，更新DOM节点。")]),t._v(" "),a("p",[a("code",[t._v("createElement")]),t._v(" 执行返回一个“虚拟节点 ( virtual node，VNode )”，包含创建DOM所需要的信息。")]),t._v(" "),a("p",[t._v("VNode的生成方式，一种是由普通 DOM 元素生成，另一种是由 Vue 组件生成。")]),t._v(" "),a("p",[t._v("“虚拟 DOM”是我们对由 Vue 组件树建立起来的整个 VNode 树的称呼。")]),t._v(" "),a("p",[t._v("除了使用slot或者函数式组件以外的应用场景，我觉得template的可读性和开发效率都更高，工程化项目中webpack还会调用vue-template-compiler预编译为render function")]),t._v(" "),a("h2",{attrs:{id:"webpack"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack"}},[t._v("#")]),t._v(" webpack")]),t._v(" "),a("p",[t._v("在工程项目中，任何静态资源都会被webpack当成模块，解析并处理这些模块之间的依赖关系，然后将它们打包起来。")]),t._v(" "),a("p",[t._v("SPA，意味着最终只有一个HTML文件，其余都是静态资源，动态注入到html中。SPA的核心是前端路由")]),t._v(" "),a("h4",{attrs:{id:"使用单文件组件sfc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用单文件组件sfc"}},[t._v("#")]),t._v(" 使用单文件组件SFC")]),t._v(" "),a("ul",[a("li",[t._v("vue-loader")]),t._v(" "),a("li",[t._v("vue-style-loader")]),t._v(" "),a("li",[t._v("@babel/core、babel-loader、")]),t._v(" "),a("li",[t._v("vue-template-compiler")])]),t._v(" "),a("h4",{attrs:{id:"loader和plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#loader和plugin"}},[t._v("#")]),t._v(" loader和plugin")]),t._v(" "),a("ul",[a("li",[t._v("html-webpack-plugin 将css文件和js文件自动注入到HTML文件中（打包后的bundle）")]),t._v(" "),a("li",[t._v("terser-webpack-plugin  压缩代码，还可以去掉console和debug信息，webpack5开始内置支持")]),t._v(" "),a("li",[t._v("mini-css-extract-plugin  从js文件中提取css代码到单独的文件中，对css代码进行代码压缩等（因为有时我们会把css给import进js文件）")]),t._v(" "),a("li",[t._v("@vue/preload-webpack-plugin 给资源的link添加Preload和Prefetch\n"),a("ul",[a("li",[a("code",[t._v('<link rel="preload">')]),t._v("是一种 resource hint，用来指定页面加载后很快会被用到的资源，所以在页面加载的过程中，我们希望在浏览器开始主体渲染之前尽早 preload。会自动给初始化渲染需要的文件加上preload（预加载）")]),t._v(" "),a("li",[a("code",[t._v('<link rel="prefetch">')]),t._v("是一种 resource hint，用来告诉浏览器在"),a("u",[t._v("页面加载完成后")]),t._v("，利用空闲时间提前获取用户未来可能会访问的内容。通过路由懒加载splitchunks方式生成的css和js都会被自动加上prefetch（预获取，类似于script标签的async，会比较消耗带宽）。")])])])]),t._v(" "),a("h2",{attrs:{id:"插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插件"}},[t._v("#")]),t._v(" 插件")]),t._v(" "),a("h3",{attrs:{id:"vue-router"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-router"}},[t._v("#")]),t._v(" Vue-router")]),t._v(" "),a("p",[t._v("更新视图但不重新请求页面。路径之间的切换，也就是组件的切换。")]),t._v(" "),a("h4",{attrs:{id:"前端路由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端路由"}},[t._v("#")]),t._v(" 前端路由")]),t._v(" "),a("ul",[a("li",[t._v("利用URL的hash (即锚点#)，通过 hashChange 事件来监听 url 的变化")]),t._v(" "),a("li",[t._v("HTML5的 History 模式，需要服务端支持。\n"),a("ul",[a("li",[t._v("服务端在接受到所有的请求后，都指向同一个html文件，不然会出现404。")]),t._v(" "),a("li",[t._v("因此 SPA 只有一个html，整个网站所有的内容都在这个html里，通过JavaScript来处理，动态填充html中的内容和样式。")])])])]),t._v(" "),a("p",[t._v("如果要独立开发一个前端路由，需要考虑到页面的可插拔、页面的生命周期、内存管理等问题")]),t._v(" "),a("h4",{attrs:{id:"使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("<router-view>")]),t._v("会根据当前路由渲染对应的页面组件")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("<router-view>")]),t._v(" 组件是一个 functional 组件，渲染路径匹配到的视图组件。")]),t._v(" "),a("li",[a("code",[t._v("<router-view>")]),t._v(" 渲染的组件还可以内嵌自己的 "),a("code",[t._v("<router-view>")]),t._v("，根据嵌套路径，渲染嵌套组件。")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("<router-link>")]),t._v(" 会被渲染为 "),a("code",[t._v("<a>")])])]),t._v(" "),a("li",[a("p",[t._v("实例 "),a("code",[t._v("$router")])])])]),t._v(" "),a("h3",{attrs:{id:"vuex"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vuex"}},[t._v("#")]),t._v(" Vuex")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("state")])]),t._v(" "),a("li",[a("p",[t._v("mutation")]),t._v(" "),a("ul",[a("li",[t._v("在组件内，来自store的数据只能读取，不能直接修改，修改的唯一途径是显示地提交mutations")]),t._v(" "),a("li",[t._v("不能进行异步操作")]),t._v(" "),a("li",[a("code",[t._v("this.$store.commit")])])])]),t._v(" "),a("li",[a("p",[t._v("action")]),t._v(" "),a("ul",[a("li",[t._v("可以进行任意的异步操作")]),t._v(" "),a("li",[t._v("actions不会直接修改数据，也是通过提交mutations的方式")]),t._v(" "),a("li",[a("code",[t._v("this.$store.dispatch")])])])]),t._v(" "),a("li",[a("p",[t._v("getters (可以看作是给组件共享的computed属性)")])]),t._v(" "),a("li",[a("p",[t._v("modules")]),t._v(" "),a("ul",[a("li",[t._v("可以将store分割到不同模块中，每个模块可以维护自己的state、mutation、action、getters")]),t._v(" "),a("li",[t._v("只是将代码拆分模块，store依然是单例，全局唯一的")])])])]),t._v(" "),a("h3",{attrs:{id:"自定义插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义插件"}},[t._v("#")]),t._v(" 自定义插件")]),t._v(" "),a("p",[t._v("第三方库用的多，自己项目中很少用到，一般就按模块来处理，utils、directives等等集中管理，然后引入使用。自己封装的组件和指令可以使用插件来全局注册，例如com-table，其中有个项目中的eventBus是用插件封装的，然后挂载到Vue的原型上，作为全局方法，就可以不用在每个组件中都引入Bus。")]),t._v(" "),a("p",[t._v("注意项：")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("$bus.on")]),t._v(" 应该在 created 钩子内使用，如果是在mounted内使用，则可能接收不到其它组件在created时emit发出的事件。")]),t._v(" "),a("li",[t._v("在 beforeDestroy 钩子中解除事件监听 "),a("code",[t._v("$bus.off")])])]),t._v(" "),a("ul",[a("li",[t._v("$on")]),t._v(" "),a("li",[t._v("$emit")]),t._v(" "),a("li",[t._v("$once")]),t._v(" "),a("li",[t._v("$off")])]),t._v(" "),a("h2",{attrs:{id:"组件更新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件更新"}},[t._v("#")]),t._v(" 组件更新")]),t._v(" "),a("p",[a("code",[t._v("sameVnode")]),t._v(" 的逻辑非常简单，如果两个 "),a("code",[t._v("vnode")]),t._v(" 的 "),a("code",[t._v("key")]),t._v(" 不相等，则是不同的；否则继续判断对于同步组件，则判断 "),a("code",[t._v("isComment")]),t._v("、"),a("code",[t._v("data")]),t._v("、"),a("code",[t._v("input")]),t._v(" 类型等是否相同，对于异步组件，则判断 "),a("code",[t._v("asyncFactory")]),t._v(" 是否相同。")]),t._v(" "),a("p",[t._v("所以根据新旧 "),a("code",[t._v("vnode")]),t._v(" 是否为 "),a("code",[t._v("sameVnode")]),t._v("，会走到不同的更新逻辑.")]),t._v(" "),a("p",[t._v("如果新旧 "),a("code",[t._v("vnode")]),t._v(" 不同，那么更新的逻辑非常简单，它本质上是要替换已存在的节点，大致分为 3 步")]),t._v(" "),a("ul",[a("li",[t._v("创建新节点")]),t._v(" "),a("li",[t._v("更新父的占位符节点\n"),a("ul",[a("li",[t._v("vue 的组件在生成 vnode 的过程中，对于原生节点就直接生成 tag 为对应原生 tag 的vnode 节点，而对于组件节点就生成 tag 是"),a("code",[t._v("vue-component-1-App")]),t._v("的节点，这种节点就是占位符节点，或者叫 placeholder 节点。（也就是通过占位符来标识这一串DOM是属于哪个组件的）")])])]),t._v(" "),a("li",[t._v("删除旧节点")])]),t._v(" "),a("p",[t._v("如果新旧节点"),a("u",[t._v("相同")]),t._v("，它会调用 "),a("code",[t._v("patchVNode")]),t._v(" 方法，是把新的 "),a("code",[t._v("vnode")]),t._v(" "),a("code",[t._v("patch")]),t._v(" 到旧的 "),a("code",[t._v("vnode")]),t._v(" 上，核心逻辑分为3步")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("当更新的 "),a("code",[t._v("vnode")]),t._v(" 是一个组件 "),a("code",[t._v("vnode")]),t._v(" 的时候，会执行 "),a("code",[t._v("prepatch")]),t._v(" 钩子函数")])]),t._v(" "),a("li",[a("p",[t._v("执行所有 "),a("code",[t._v("module")]),t._v(" 的 "),a("code",[t._v("update")]),t._v(" 钩子函数以及用户自定义 "),a("code",[t._v("update")]),t._v(" 钩子函数")])]),t._v(" "),a("li",[a("p",[t._v("完成 "),a("code",[t._v("patch")]),t._v(" 过程")]),t._v(" "),a("ul",[a("li",[t._v("如果 "),a("code",[t._v("vnode")]),t._v(" 是个文本节点且新旧文本不相同，则直接替换文本内容。")]),t._v(" "),a("li",[t._v("如果不是文本节点，则判断它们的子节点，并分了几种情况处理\n"),a("ul",[a("li",[t._v("如果子节点都存在且不同，则调用 "),a("strong",[a("code",[t._v("updateChildren")])]),t._v(" 方法进行Diff比较然后更新")])])])])]),t._v(" "),a("li",[a("p",[t._v("执行 "),a("code",[t._v("postpatch")]),t._v(" 钩子函数")])])]),t._v(" "),a("blockquote",[a("p",[t._v("当数据发生变化，在 "),a("code",[t._v("patch")]),t._v(" 的过程中会执行 "),a("code",[t._v("patchVnode")]),t._v(" 的逻辑，它会对比新旧 "),a("code",[t._v("vnode")]),t._v(" 节点，甚至对比它们的子节点去做更新逻辑。")]),t._v(" "),a("p",[t._v("在旧vnode的子节点中尽量找到与新vnode的子节点相同 (sameVnode) 的节点")])]),t._v(" "),a("h3",{attrs:{id:"diff"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#diff"}},[t._v("#")]),t._v(" Diff")]),t._v(" "),a("p",[t._v("当新旧 VNode 同时存在 children，通过 updateChildren 对子节点做更新。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" oldStartIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" newStartIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" oldEndIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" oldCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" oldStartVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" oldCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" oldEndVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" oldCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("oldEndIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" newEndIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" newStartVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" newEndVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("newEndIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldStartIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" oldEndIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" newStartIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" newEndIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("只需要 "),a("code",[t._v("createElement")]),t._v(" "),a("code",[t._v("insertBefore")]),t._v(" 等实际DOM操作来完成更新，并且复用了DOM节点，比起 innerHTML 这类直接更改所有子节点的方式，开销低很多，节点越复杂，DOM更新的性能提升越明显")]),t._v(" "),a("h2",{attrs:{id:"ssr"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssr"}},[t._v("#")]),t._v(" SSR")]),t._v(" "),a("ol",[a("li",[t._v("加快首屏渲染速度")]),t._v(" "),a("li",[t._v("SEO")]),t._v(" "),a("li",[t._v("减少HTTP请求")])]),t._v(" "),a("h2",{attrs:{id:"客户端渲染和服务端渲染"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#客户端渲染和服务端渲染"}},[t._v("#")]),t._v(" 客户端渲染和服务端渲染")]),t._v(" "),a("p",[t._v("视图 = 模板 + 数据 = 组件 + 数据模型")]),t._v(" "),a("p",[t._v("CSR需要浏览器下载HTML文档，然后还要下载JS文件，执行js代码来显示页面。")]),t._v(" "),a("ul",[a("li",[t._v("客户端渲染可以将静态资源部署到cdn上，实现高并发。缺点是首页渲染慢，不利于SEO")])]),t._v(" "),a("p",[t._v("SSR只需要浏览器下载HTML文档，就可以直接显示页面。")]),t._v(" "),a("ul",[a("li",[t._v("服务端渲染，cpu 密集型的操作，高并发下很容易造成 cpu 满载")])]),t._v(" "),a("p",[t._v("同构应用：服务端运行代码（渲染虚拟DOM）生成HTML发送给浏览器，浏览器收到后进行页面展示，然后加载JS代码，执行JS代码并接管页面的操作。（同构应用最好在服务端上添加CSS，避免客户端执行JS再渲染所造成的页面闪动）")]),t._v(" "),a("h3",{attrs:{id:"页面渲染原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#页面渲染原理"}},[t._v("#")]),t._v(" 页面渲染原理")]),t._v(" "),a("h4",{attrs:{id:"像素管道"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#像素管道"}},[t._v("#")]),t._v(" 像素管道")]),t._v(" "),a("p",[t._v("JavaScript、样式计算、布局、绘制、合成")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("JavaScript：使用 JavaScript 来实现一些视觉变化的效果，JavaScript代码中可能影响DOM或样式；例如使用requestAnimationFrame钩子，在浏览器下一次重排重绘以前执行其中的callback")])]),t._v(" "),a("li",[a("p",[t._v("Style calculations：匹配selectors，应用css规则，计算每个元素的最终样式")])]),t._v(" "),a("li",[a("p",[t._v("Layout：计算它要占据的空间大小及其在屏幕的位置")])]),t._v(" "),a("li",[a("p",[t._v("Paint：创建绘图调用的列表，填充像素（栅格化rasterize），绘制多个图层")])]),t._v(" "),a("li",[a("p",[t._v("Composite：合成多个图层")])])]),t._v(" "),a("h4",{attrs:{id:"页面的渲染过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#页面的渲染过程"}},[t._v("#")]),t._v(" 页面的渲染过程")]),t._v(" "),a("p",[t._v("​\t浏览器通过请求得到一个HTML文本，渲染进程解析HTML，开始构建DOM树。解析HTML的过程如果遇到内联样式，后者css脚本，就会下载并构建样式规则，若遇到JavaScript脚本，则会下载并执行脚本。")]),t._v(" "),a("p",[t._v("​\t渲染进程将解析得到的DOM树和样式规则（CSSOM），合并生成渲染树（render tree）。随后将渲染树进行布局，layout布局的过程中去遍历渲染树，确定树中每个节点的size和position，依照每个元素的盒模型进行布局排列，得到布局树layout tree。")]),t._v(" "),a("p",[t._v("​\t然后对布局树进行绘制，也就是把layout tree上的每个盒模型转换成页面上的真实像素。为了确保重绘的性能，绘制的时候会把layout tree的元素取出分成多个图层，对每个图层进行栅格化填充像素，不同图层相互重叠的时候就进行合成。按照绘制顺序合成多个图层，将合成帧发送给GPU进程然后展示到屏幕上。")]),t._v(" "),a("h3",{attrs:{id:"spa"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spa"}},[t._v("#")]),t._v(" SPA")]),t._v(" "),a("p",[t._v("当页面需要重新渲染内容的时候，不需要发送请求给服务端来获取新的HTML页面。")]),t._v(" "),a("p",[t._v("Pros in the SPA：")]),t._v(" "),a("ul",[a("li",[t._v("前后端分离，web端和移动端的应用可以重用同一个后端")]),t._v(" "),a("li",[t._v("而且SPA实现的应用程序，除了首页以外的页面加载速度更快，以及页面交互性更好。")])]),t._v(" "),a("p",[t._v("Cons in the SPA")]),t._v(" "),a("ul",[a("li",[t._v("安全性问题，XSS")]),t._v(" "),a("li",[t._v("性能问题，JavaScript可能导致的内存泄漏，首页加载慢")]),t._v(" "),a("li",[t._v("不利于SEO")])]),t._v(" "),a("h3",{attrs:{id:"ssr-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssr-2"}},[t._v("#")]),t._v(" SSR")]),t._v(" "),a("p",[t._v("网站的初始页面内容是在服务端渲染完成的，浏览器可以直接下载并使用带有渲染好数据的HTML文件")]),t._v(" "),a("p",[t._v("Pros in the SSR：")]),t._v(" "),a("ul",[a("li",[t._v("利于SEO")]),t._v(" "),a("li",[t._v("首页加载更快，白屏时间短")]),t._v(" "),a("li",[t._v("适用于静态网站")])]),t._v(" "),a("p",[t._v("Cons in the SPA（基本上是开发上的不便，所以需要权衡投入产出比）：")]),t._v(" "),a("ul",[a("li",[t._v("代码复杂度增加")]),t._v(" "),a("li",[t._v("占用更多的服务器资源，构建和部署更加复杂\n"),a("ul",[a("li",[t._v("由于服务器增加了渲染HTML的需求，使得服务器上还需要一个node server运行环境。而且比起SPA中只需要输出静态资源文件，SSR会新增了数据获取的IO和渲染HTML的CPU占用。要想在流量暴增时不会宕机，要保障服务还需要使用响应的缓存策略和准备相应的服务器负载。")])])])]),t._v(" "),a("h3",{attrs:{id:"前端路由-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端路由-2"}},[t._v("#")]),t._v(" 前端路由")])])}),[],!1,null,null,null);s.default=e.exports}}]);