(window.webpackJsonp=window.webpackJsonp||[]).push([[140],{539:function(t,e,s){"use strict";s.r(e);var a=s(43),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"扫盲"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#扫盲"}},[t._v("#")]),t._v(" 扫盲")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/91844181",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端科普系列-Node.js:换个角度看世界"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"预备知识"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#预备知识"}},[t._v("#")]),t._v(" 预备知识")]),t._v(" "),s("h3",{attrs:{id:"计算机原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#计算机原理"}},[t._v("#")]),t._v(" 计算机原理")]),t._v(" "),s("h4",{attrs:{id:"任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#任务"}},[t._v("#")]),t._v(" 任务")]),t._v(" "),s("ul",[s("li",[t._v("CPU密集型，CPU-bound（计算密集型）")]),t._v(" "),s("li",[t._v("IO密集型，IO-bound")])]),t._v(" "),s("h4",{attrs:{id:"存储"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#存储"}},[t._v("#")]),t._v(" 存储")]),t._v(" "),s("ol",[s("li",[t._v("RAM，Random Access Memory\n"),s("ul",[s("li",[t._v("读取速度比ROM快很多，但不稳定( volatile )，断电后数据会丢失")])])]),t._v(" "),s("li",[t._v("ROM，Read Only Memory\n"),s("ul",[s("li",[t._v("稳定，数据会被一直保存")])])]),t._v(" "),s("li",[t._v("Flash Memory，闪存\n"),s("ul",[s("li",[t._v("用在相机、U盘等等")])])])]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"后端相关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#后端相关"}},[t._v("#")]),t._v(" 后端相关")]),t._v(" "),s("h4",{attrs:{id:"驱动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#驱动"}},[t._v("#")]),t._v(" 驱动")]),t._v(" "),s("ul",[s("li",[t._v("数据驱动")]),t._v(" "),s("li",[t._v("事件驱动\n"),s("ul",[s("li",[t._v("发布订阅模式（观察者模式）")]),t._v(" "),s("li",[t._v("events.on / events.emit / ...")])])])]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"性能相关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#性能相关"}},[t._v("#")]),t._v(" 性能相关")]),t._v(" "),s("h4",{attrs:{id:"指标"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#指标"}},[t._v("#")]),t._v(" 指标")]),t._v(" "),s("ul",[s("li",[t._v("QPS (Queries per second)、TPS (Transactions Per Second)\n"),s("ul",[s("li",[t._v("TPS 用于统计一个页面的访问量，而这个页面可能有多个request，就用 QPS 来统计")])])]),t._v(" "),s("li",[t._v("并发量 (Concurrency)\n"),s("ul",[s("li",[t._v("并发量 = QPS * 平均响应时间")])])]),t._v(" "),s("li",[t._v("吞吐量 (Throughput)\n"),s("ul",[s("li",[t._v("数据层的指标，指单位时间内系统传输的数据量，以MB/GB等为单位")])])])]),t._v(" "),s("h4",{attrs:{id:"高并发系统设计"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#高并发系统设计"}},[t._v("#")]),t._v(" 高并发系统设计")]),t._v(" "),s("ul",[s("li",[t._v("高并发、低延时")]),t._v(" "),s("li",[t._v("高性能、高可用、高扩展")])]),t._v(" "),s("h2",{attrs:{id:"特点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#特点"}},[t._v("#")]),t._v(" 特点")]),t._v(" "),s("ul",[s("li",[t._v("异步事件驱动")]),t._v(" "),s("li",[t._v("非阻塞 IO")]),t._v(" "),s("li",[t._v("可扩展性")])]),t._v(" "),s("blockquote",[s("p",[t._v("As an asynchronous event-driven JavaScript runtime, Node.js is designed to build scalable network applications.")]),t._v(" "),s("p",[t._v("It presents an "),s("a",{attrs:{href:"https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/",target:"_blank",rel:"noopener noreferrer"}},[t._v("event loop"),s("OutboundLink")],1),t._v(" as a runtime construct instead of as a library. Node.js simply enters the event loop after executing the input script. Node.js exits the event loop when there are no more callbacks to perform. 【内置event loop，无需用户启用】")]),t._v(" "),s("p",[t._v("HTTP is a first-class citizen in Node.js, designed with streaming and low latency in mind.")]),t._v(" "),s("p",[t._v("Node.js being "),s("u",[t._v("designed without threads")]),t._v("【被设计成单线程】 doesn't mean you can't take advantage of multiple cores in your environment.【node也可以使用多进程】")])]),t._v(" "),s("h2",{attrs:{id:"基本原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本原理"}},[t._v("#")]),t._v(" 基本原理")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://image-static.segmentfault.com/234/648/2346487390-5ab46904a01be_fix732"}}),t._v(" "),s("ul",[s("li",[s("code",[t._v("V8")]),t._v(" 解释并执行 JavaScript 代码")]),t._v(" "),s("li",[s("code",[t._v("libuv")]),t._v(" 由事件循环和线程池组成，负责所有 I/O 任务的分发与执行\n"),s("ul",[s("li",[t._v("将等待中的 I/O 任务放到 Event Loop 里，由 Event Loop 将 I/O 任务分发到 Thread Pool 里")]),t._v(" "),s("li",[t._v("所以node的单线程指的是接收任务的时候，无需进程/线程切换上下文的成本，所以高效，但是执行任务时是在线程池中通过多线程执行")])])]),t._v(" "),s("li",[t._v("在"),s("code",[t._v("Node.js Bindings")]),t._v("层做的事儿就是将 Chrome V8 等暴露的 "),s("code",[t._v("C/C++")]),t._v(" 接口转成JavaScript Api，并且结合这些 Api 编写了 Node.js 标准库，所有这些 Api 统称为 Node.js SDK")])]),t._v(" "),s("h2",{attrs:{id:"应用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#应用场景"}},[t._v("#")]),t._v(" 应用场景")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("分类")]),t._v(" "),s("th",[t._v("相关模块")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("网站 / API代理 / [SSR & PWA]")]),t._v(" "),s("td",[t._v("Express、Koa")])]),t._v(" "),s("tr",[s("td",[t._v("HTTP Api 接口")]),t._v(" "),s("td",[t._v("Restify、HApi")])]),t._v(" "),s("tr",[s("td",[t._v("前端构建工具")]),t._v(" "),s("td",[t._v("Grunt / Gulp / Bower / Webpack / ...")])]),t._v(" "),s("tr",[s("td",[t._v("跨平台打包工具")]),t._v(" "),s("td",[t._v("electron、nw.js")])]),t._v(" "),s("tr",[s("td",[t._v("编辑器")]),t._v(" "),s("td",[t._v("electron")])]),t._v(" "),s("tr",[s("td",[t._v("...")]),t._v(" "),s("td")])])]),t._v(" "),s("h2",{attrs:{id:"安装配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装配置"}},[t._v("#")]),t._v(" 安装配置")]),t._v(" "),s("p",[t._v("删除原来的 node")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" uninstall "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" -g\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -rf /usr/local/lib/node /usr/local/lib/node_modules /var/db/receipts/org.nodejs.*\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -rf /usr/local/include/node /Users/"),s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$USER")]),t._v("/.npm\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" /usr/local/bin/node\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" /usr/local/share/man/man1/node.1\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" /usr/local/lib/dtrace/node.d\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("node -v\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" -v\n")])])]),s("p",[t._v("改用 homebrew 安装")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 卸载原来安装的最新版本node")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("base"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" MacBook-Pro➜  ~  ᐅ  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("history")]),t._v(" -5\n "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4452")]),t._v("  brew uninstall "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4453")]),t._v("  brew uninstall node\n "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4454")]),t._v("  brew list node\n "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4455")]),t._v("  brew list "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4456")]),t._v("  brew search node\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("brew "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" node@14\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# brew list node@14")]),t._v("\nbrew "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("link")]),t._v(" node@14\nnode -v        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# v14.16.1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" -v        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 6.14.12")]),t._v("\n")])])]),s("h2",{attrs:{id:"学习核心"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#学习核心"}},[t._v("#")]),t._v(" 学习核心")]),t._v(" "),s("h3",{attrs:{id:"异步流程控制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#异步流程控制"}},[t._v("#")]),t._v(" 异步流程控制")]),t._v(" "),s("p",[t._v("Node.js的API都是异步的，同步的函数是奢求，要查API文档，在高并发场景下慎用。")]),t._v(" "),s("p",[t._v("异步解决方案：")]),t._v(" "),s("ul",[s("li",[t._v("Api写法：Error-first Callback 和 EventEmitter")]),t._v(" "),s("li",[t._v("Promise")]),t._v(" "),s("li",[t._v("async/await")])]),t._v(" "),s("h1",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://xie.infoq.cn/article/20c3ad1736d027615b12d6b20",target:"_blank",rel:"noopener noreferrer"}},[t._v("不懂什么是高并发？看完这篇文章你可以去吊打面试官了"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://nodejs.org/en/about/",target:"_blank",rel:"noopener noreferrer"}},[t._v("About | Node.js"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://segmentfault.com/a/1190000013933520",target:"_blank",rel:"noopener noreferrer"}},[t._v("【全文】狼叔：如何正确的学习Node.js"),s("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=n.exports}}]);