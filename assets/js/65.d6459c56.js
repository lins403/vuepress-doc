(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{466:function(a,t,n){"use strict";n.r(t);var s=n(43),e=Object(s.a)({},(function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h1",{attrs:{id:"yarn"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#yarn"}},[a._v("#")]),a._v(" yarn "),n("Badge",{attrs:{text:"v1.22.10",type:"tip"}})],1),a._v(" "),n("p",[a._v("Yarn stands for “"),n("em",[a._v("Yet Another Resource Negotiator")]),a._v("”, developed in 2016 by Facebook.")]),a._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("yarn\nyarn add\nyarn upgrade\n")])])]),n("p",[n("a",{attrs:{href:"https://classic.yarnpkg.com/en/docs/migrating-from-npm#toc-cli-commands-comparison",target:"_blank",rel:"noopener noreferrer"}},[a._v("Migrating from npm | Yarn"),n("OutboundLink")],1)]),a._v(" "),n("h2",{attrs:{id:"yarn-install"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#yarn-install"}},[a._v("#")]),a._v(" yarn install")]),a._v(" "),n("p",[n("code",[a._v("yarn install")]),a._v(" will install the exact version in the lockfile")]),a._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[a._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" v1.22.10\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("/4"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" 🔍  Resolving packages"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("/4"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" 🚚  Fetching packages"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("/4"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" 🔗  Linking dependencies"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),a._v("/4"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" 🔨  Building fresh packages"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# [5/5] ♻️  Cleaning modules...")]),a._v("\n")])])]),n("h2",{attrs:{id:"yarn-lock"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#yarn-lock"}},[a._v("#")]),a._v(" yarn.lock")]),a._v(" "),n("p",[a._v("yarn.lock 的  exact versions 能匹配 package.json 时，就会直接安装这个版本，不能满足时才会重新安装并更新 yarn.lock")]),a._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# If you want to ensure yarn.lock is not updated, use --frozen-lockfile.")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" --frozen-lockfile\n")])])]),n("p",[a._v("重要字段与其作用")]),a._v(" "),n("ul",[n("li",[n("p",[n("code",[a._v("version")]),a._v(" 字段是唯一确定的版本号，没有用^或~表示版本区间，"),n("strong",[a._v("可以锁定 package 的唯一版本")])])]),a._v(" "),n("li",[n("p",[n("code",[a._v("integrity")]),a._v(" 字段是一串哈希值，用于对通过"),n("code",[a._v("resolved")]),a._v("下载的文件进行"),n("strong",[a._v("完整性校验")]),a._v("。如果出现 diff，说明同一个下载链接对应的文件被修改过。")])])]),a._v(" "),n("p",[a._v("注意📢")]),a._v(" "),n("ul",[n("li",[n("code",[a._v("yarn.lock")]),a._v(" 是自动生成的，你不应该去手动的修改。")]),a._v(" "),n("li",[a._v("不要通过修改 "),n("code",[a._v("package.json")]),a._v(" 来升级版本，这样会导致 yarn.lock 没有更新。")]),a._v(" "),n("li",[a._v("通过 "),n("code",[a._v("yarn add")]),a._v(" 和 "),n("code",[a._v("yarn upgrade")]),a._v(" 来自动更新 package.json 和 yarn.lock")])]),a._v(" "),n("h3",{attrs:{id:"resolutions"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#resolutions"}},[a._v("#")]),a._v(" resolutions")]),a._v(" "),n("p",[a._v("resolutions 可以突破版本限制")]),a._v(" "),n("p",[n("a",{attrs:{href:"https://classic.yarnpkg.com/en/docs/selective-version-resolutions/#toc-how-to-use-it",target:"_blank",rel:"noopener noreferrer"}},[a._v("Selective dependency resolutions | Yarn"),n("OutboundLink")],1)]),a._v(" "),n("h2",{attrs:{id:"autoclean"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#autoclean"}},[a._v("#")]),a._v(" autoclean")]),a._v(" "),n("p",[a._v("Cleans and removes unnecessary files from package dependencies.")]),a._v(" "),n("p",[a._v("删除 "),n("code",[a._v("node_modules")]),a._v(" 的在 "),n("code",[a._v(".yarnclean")]),a._v(" 中声明的文件和文件夹，以减小依赖包的大小")]),a._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" autoclean -I "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#--init")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" autoclean -F "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#--force")]),a._v("\n")])])]),n("h1",{attrs:{id:"参考"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[a._v("#")]),a._v(" 参考")]),a._v(" "),n("p",[n("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/400193691",target:"_blank",rel:"noopener noreferrer"}},[a._v("yarn.lock 你锁明白了吗？"),n("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);