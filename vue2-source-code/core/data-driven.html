<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>数据驱动 | 小眯嘻的文档博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/vuepress-doc/assets/img/config/favicon.png">
    <meta name="description" content="学习&思考&总结">
    
    <link rel="preload" href="/vuepress-doc/assets/css/0.styles.d770c3b5.css" as="style"><link rel="preload" href="/vuepress-doc/assets/js/app.9fb27f3b.js" as="script"><link rel="preload" href="/vuepress-doc/assets/js/2.92a218c7.js" as="script"><link rel="preload" href="/vuepress-doc/assets/js/185.a670aec3.js" as="script"><link rel="prefetch" href="/vuepress-doc/assets/js/10.fea52fac.js"><link rel="prefetch" href="/vuepress-doc/assets/js/100.9eae5f01.js"><link rel="prefetch" href="/vuepress-doc/assets/js/101.c93d5f62.js"><link rel="prefetch" href="/vuepress-doc/assets/js/102.18a3a03e.js"><link rel="prefetch" href="/vuepress-doc/assets/js/103.135de95b.js"><link rel="prefetch" href="/vuepress-doc/assets/js/104.e53789cc.js"><link rel="prefetch" href="/vuepress-doc/assets/js/105.588484a9.js"><link rel="prefetch" href="/vuepress-doc/assets/js/106.0eb9dfed.js"><link rel="prefetch" href="/vuepress-doc/assets/js/107.98e38910.js"><link rel="prefetch" href="/vuepress-doc/assets/js/108.aa18923d.js"><link rel="prefetch" href="/vuepress-doc/assets/js/109.e4f139cf.js"><link rel="prefetch" href="/vuepress-doc/assets/js/11.e2052b65.js"><link rel="prefetch" href="/vuepress-doc/assets/js/110.d384d30a.js"><link rel="prefetch" href="/vuepress-doc/assets/js/111.d6c31b17.js"><link rel="prefetch" href="/vuepress-doc/assets/js/112.72636f45.js"><link rel="prefetch" href="/vuepress-doc/assets/js/113.94c2eecb.js"><link rel="prefetch" href="/vuepress-doc/assets/js/114.c04fd062.js"><link rel="prefetch" href="/vuepress-doc/assets/js/115.21896da6.js"><link rel="prefetch" href="/vuepress-doc/assets/js/116.7e15ca17.js"><link rel="prefetch" href="/vuepress-doc/assets/js/117.073dc223.js"><link rel="prefetch" href="/vuepress-doc/assets/js/118.0668b789.js"><link rel="prefetch" href="/vuepress-doc/assets/js/119.468ee50d.js"><link rel="prefetch" href="/vuepress-doc/assets/js/12.062d1b43.js"><link rel="prefetch" href="/vuepress-doc/assets/js/120.184aa547.js"><link rel="prefetch" href="/vuepress-doc/assets/js/121.66d21177.js"><link rel="prefetch" href="/vuepress-doc/assets/js/122.7e820b8d.js"><link rel="prefetch" href="/vuepress-doc/assets/js/123.8b9b72ab.js"><link rel="prefetch" href="/vuepress-doc/assets/js/124.47576793.js"><link rel="prefetch" href="/vuepress-doc/assets/js/125.937210b8.js"><link rel="prefetch" href="/vuepress-doc/assets/js/126.86ff762c.js"><link rel="prefetch" href="/vuepress-doc/assets/js/127.35ce1090.js"><link rel="prefetch" href="/vuepress-doc/assets/js/128.5360acb2.js"><link rel="prefetch" href="/vuepress-doc/assets/js/129.a086857d.js"><link rel="prefetch" href="/vuepress-doc/assets/js/13.91065d41.js"><link rel="prefetch" href="/vuepress-doc/assets/js/130.647162c2.js"><link rel="prefetch" href="/vuepress-doc/assets/js/131.a0c40e5f.js"><link rel="prefetch" href="/vuepress-doc/assets/js/132.e44bf949.js"><link rel="prefetch" href="/vuepress-doc/assets/js/133.8dfbe566.js"><link rel="prefetch" href="/vuepress-doc/assets/js/134.1dd471f5.js"><link rel="prefetch" href="/vuepress-doc/assets/js/135.50222b5a.js"><link rel="prefetch" href="/vuepress-doc/assets/js/136.6aff6624.js"><link rel="prefetch" href="/vuepress-doc/assets/js/137.91153589.js"><link rel="prefetch" href="/vuepress-doc/assets/js/138.c3f68bcd.js"><link rel="prefetch" href="/vuepress-doc/assets/js/139.e5c83df9.js"><link rel="prefetch" href="/vuepress-doc/assets/js/14.680bae8b.js"><link rel="prefetch" href="/vuepress-doc/assets/js/140.9e9933b1.js"><link rel="prefetch" href="/vuepress-doc/assets/js/141.88e68255.js"><link rel="prefetch" href="/vuepress-doc/assets/js/142.f1abb74b.js"><link rel="prefetch" href="/vuepress-doc/assets/js/143.763c858b.js"><link rel="prefetch" href="/vuepress-doc/assets/js/144.0e12bc42.js"><link rel="prefetch" href="/vuepress-doc/assets/js/145.4d81e02c.js"><link rel="prefetch" href="/vuepress-doc/assets/js/146.b4c9e033.js"><link rel="prefetch" href="/vuepress-doc/assets/js/147.1147a1d6.js"><link rel="prefetch" href="/vuepress-doc/assets/js/148.f4437060.js"><link rel="prefetch" href="/vuepress-doc/assets/js/149.ee71917d.js"><link rel="prefetch" href="/vuepress-doc/assets/js/15.a8efaede.js"><link rel="prefetch" href="/vuepress-doc/assets/js/150.c1a09c42.js"><link rel="prefetch" href="/vuepress-doc/assets/js/151.a2d1b66d.js"><link rel="prefetch" href="/vuepress-doc/assets/js/152.2c5d4d40.js"><link rel="prefetch" href="/vuepress-doc/assets/js/153.c309d5d0.js"><link rel="prefetch" href="/vuepress-doc/assets/js/154.6cda5dc3.js"><link rel="prefetch" href="/vuepress-doc/assets/js/155.774ca70d.js"><link rel="prefetch" href="/vuepress-doc/assets/js/156.712dc481.js"><link rel="prefetch" href="/vuepress-doc/assets/js/157.b86df157.js"><link rel="prefetch" href="/vuepress-doc/assets/js/158.4aa6d406.js"><link rel="prefetch" href="/vuepress-doc/assets/js/159.6234c5da.js"><link rel="prefetch" href="/vuepress-doc/assets/js/16.dfb86234.js"><link rel="prefetch" href="/vuepress-doc/assets/js/160.1bd9a4f2.js"><link rel="prefetch" href="/vuepress-doc/assets/js/161.d8e58d5d.js"><link rel="prefetch" href="/vuepress-doc/assets/js/162.c4ac3e6f.js"><link rel="prefetch" href="/vuepress-doc/assets/js/163.2cbf930b.js"><link rel="prefetch" href="/vuepress-doc/assets/js/164.02d69614.js"><link rel="prefetch" href="/vuepress-doc/assets/js/165.8b27a3f5.js"><link rel="prefetch" href="/vuepress-doc/assets/js/166.e0d73c56.js"><link rel="prefetch" href="/vuepress-doc/assets/js/167.733f599a.js"><link rel="prefetch" href="/vuepress-doc/assets/js/168.408413e7.js"><link rel="prefetch" href="/vuepress-doc/assets/js/169.6cd4b8c1.js"><link rel="prefetch" href="/vuepress-doc/assets/js/17.99ff476d.js"><link rel="prefetch" href="/vuepress-doc/assets/js/170.69d6ae62.js"><link rel="prefetch" href="/vuepress-doc/assets/js/171.9be0c2bf.js"><link rel="prefetch" href="/vuepress-doc/assets/js/172.2a403f8b.js"><link rel="prefetch" href="/vuepress-doc/assets/js/173.c219d2e9.js"><link rel="prefetch" href="/vuepress-doc/assets/js/174.a410e5fd.js"><link rel="prefetch" href="/vuepress-doc/assets/js/175.895724fb.js"><link rel="prefetch" href="/vuepress-doc/assets/js/176.753c112a.js"><link rel="prefetch" href="/vuepress-doc/assets/js/177.5ee20177.js"><link rel="prefetch" href="/vuepress-doc/assets/js/178.94dbcb07.js"><link rel="prefetch" href="/vuepress-doc/assets/js/179.74fc7145.js"><link rel="prefetch" href="/vuepress-doc/assets/js/18.a8467f5f.js"><link rel="prefetch" href="/vuepress-doc/assets/js/180.3d2eee69.js"><link rel="prefetch" href="/vuepress-doc/assets/js/181.eddaa2ba.js"><link rel="prefetch" href="/vuepress-doc/assets/js/182.f00efc4b.js"><link rel="prefetch" href="/vuepress-doc/assets/js/183.5cbd8406.js"><link rel="prefetch" href="/vuepress-doc/assets/js/184.c14338d8.js"><link rel="prefetch" href="/vuepress-doc/assets/js/186.1bd54f25.js"><link rel="prefetch" href="/vuepress-doc/assets/js/187.f17e9014.js"><link rel="prefetch" href="/vuepress-doc/assets/js/188.83ba8ede.js"><link rel="prefetch" href="/vuepress-doc/assets/js/189.50a23c5c.js"><link rel="prefetch" href="/vuepress-doc/assets/js/19.f70ca800.js"><link rel="prefetch" href="/vuepress-doc/assets/js/190.038acf1a.js"><link rel="prefetch" href="/vuepress-doc/assets/js/191.d5995e51.js"><link rel="prefetch" href="/vuepress-doc/assets/js/20.e28660a8.js"><link rel="prefetch" href="/vuepress-doc/assets/js/21.d5c12a61.js"><link rel="prefetch" href="/vuepress-doc/assets/js/22.674c6fff.js"><link rel="prefetch" href="/vuepress-doc/assets/js/23.c61d4934.js"><link rel="prefetch" href="/vuepress-doc/assets/js/24.ec675e36.js"><link rel="prefetch" href="/vuepress-doc/assets/js/25.01b6cfe4.js"><link rel="prefetch" href="/vuepress-doc/assets/js/26.95d03d57.js"><link rel="prefetch" href="/vuepress-doc/assets/js/27.15582102.js"><link rel="prefetch" href="/vuepress-doc/assets/js/28.05a9955b.js"><link rel="prefetch" href="/vuepress-doc/assets/js/29.991bcc6d.js"><link rel="prefetch" href="/vuepress-doc/assets/js/3.aa380f55.js"><link rel="prefetch" href="/vuepress-doc/assets/js/30.5b3fb42b.js"><link rel="prefetch" href="/vuepress-doc/assets/js/31.f2408aa5.js"><link rel="prefetch" href="/vuepress-doc/assets/js/32.81e30050.js"><link rel="prefetch" href="/vuepress-doc/assets/js/33.370683a2.js"><link rel="prefetch" href="/vuepress-doc/assets/js/34.2f178c60.js"><link rel="prefetch" href="/vuepress-doc/assets/js/35.026dd4f2.js"><link rel="prefetch" href="/vuepress-doc/assets/js/36.ad9dfdbf.js"><link rel="prefetch" href="/vuepress-doc/assets/js/37.fa982462.js"><link rel="prefetch" href="/vuepress-doc/assets/js/38.241ca5a9.js"><link rel="prefetch" href="/vuepress-doc/assets/js/39.3b3541a2.js"><link rel="prefetch" href="/vuepress-doc/assets/js/4.727843a1.js"><link rel="prefetch" href="/vuepress-doc/assets/js/40.0096afa1.js"><link rel="prefetch" href="/vuepress-doc/assets/js/41.8008aaf7.js"><link rel="prefetch" href="/vuepress-doc/assets/js/42.93dc8381.js"><link rel="prefetch" href="/vuepress-doc/assets/js/43.05dfdcf7.js"><link rel="prefetch" href="/vuepress-doc/assets/js/44.90db7e04.js"><link rel="prefetch" href="/vuepress-doc/assets/js/45.74563b70.js"><link rel="prefetch" href="/vuepress-doc/assets/js/46.a90d9fc3.js"><link rel="prefetch" href="/vuepress-doc/assets/js/47.6441eb0a.js"><link rel="prefetch" href="/vuepress-doc/assets/js/48.ff51460f.js"><link rel="prefetch" href="/vuepress-doc/assets/js/49.b5e15f4e.js"><link rel="prefetch" href="/vuepress-doc/assets/js/5.29375446.js"><link rel="prefetch" href="/vuepress-doc/assets/js/50.312c84f0.js"><link rel="prefetch" href="/vuepress-doc/assets/js/51.9c9b47a1.js"><link rel="prefetch" href="/vuepress-doc/assets/js/52.89e19ec0.js"><link rel="prefetch" href="/vuepress-doc/assets/js/53.7fe35b27.js"><link rel="prefetch" href="/vuepress-doc/assets/js/54.06f290d0.js"><link rel="prefetch" href="/vuepress-doc/assets/js/55.28ea138a.js"><link rel="prefetch" href="/vuepress-doc/assets/js/56.1f9094b3.js"><link rel="prefetch" href="/vuepress-doc/assets/js/57.db328cff.js"><link rel="prefetch" href="/vuepress-doc/assets/js/58.1372af02.js"><link rel="prefetch" href="/vuepress-doc/assets/js/59.34875a6c.js"><link rel="prefetch" href="/vuepress-doc/assets/js/6.68be3bed.js"><link rel="prefetch" href="/vuepress-doc/assets/js/60.ba4648ff.js"><link rel="prefetch" href="/vuepress-doc/assets/js/61.1d38e76a.js"><link rel="prefetch" href="/vuepress-doc/assets/js/62.8a6b547c.js"><link rel="prefetch" href="/vuepress-doc/assets/js/63.f4fbbfac.js"><link rel="prefetch" href="/vuepress-doc/assets/js/64.5ebc5860.js"><link rel="prefetch" href="/vuepress-doc/assets/js/65.2cd3b841.js"><link rel="prefetch" href="/vuepress-doc/assets/js/66.96091db4.js"><link rel="prefetch" href="/vuepress-doc/assets/js/67.dced9ff9.js"><link rel="prefetch" href="/vuepress-doc/assets/js/68.d39c08c1.js"><link rel="prefetch" href="/vuepress-doc/assets/js/69.1564592c.js"><link rel="prefetch" href="/vuepress-doc/assets/js/7.12b35d06.js"><link rel="prefetch" href="/vuepress-doc/assets/js/70.71cb3934.js"><link rel="prefetch" href="/vuepress-doc/assets/js/71.76ee86a3.js"><link rel="prefetch" href="/vuepress-doc/assets/js/72.dfa800bd.js"><link rel="prefetch" href="/vuepress-doc/assets/js/73.86408f65.js"><link rel="prefetch" href="/vuepress-doc/assets/js/74.a4b8a6ec.js"><link rel="prefetch" href="/vuepress-doc/assets/js/75.f4bf4745.js"><link rel="prefetch" href="/vuepress-doc/assets/js/76.826ce909.js"><link rel="prefetch" href="/vuepress-doc/assets/js/77.3bf89e11.js"><link rel="prefetch" href="/vuepress-doc/assets/js/78.803d2fdb.js"><link rel="prefetch" href="/vuepress-doc/assets/js/79.40fe61d9.js"><link rel="prefetch" href="/vuepress-doc/assets/js/8.c238af59.js"><link rel="prefetch" href="/vuepress-doc/assets/js/80.bed34dfb.js"><link rel="prefetch" href="/vuepress-doc/assets/js/81.1422fd35.js"><link rel="prefetch" href="/vuepress-doc/assets/js/82.e219002f.js"><link rel="prefetch" href="/vuepress-doc/assets/js/83.43345036.js"><link rel="prefetch" href="/vuepress-doc/assets/js/84.f01ad11b.js"><link rel="prefetch" href="/vuepress-doc/assets/js/85.5111c1f4.js"><link rel="prefetch" href="/vuepress-doc/assets/js/86.722a9add.js"><link rel="prefetch" href="/vuepress-doc/assets/js/87.6f0574b7.js"><link rel="prefetch" href="/vuepress-doc/assets/js/88.72b57615.js"><link rel="prefetch" href="/vuepress-doc/assets/js/89.6c9769b5.js"><link rel="prefetch" href="/vuepress-doc/assets/js/9.d01c9de7.js"><link rel="prefetch" href="/vuepress-doc/assets/js/90.2b23be39.js"><link rel="prefetch" href="/vuepress-doc/assets/js/91.6f255edb.js"><link rel="prefetch" href="/vuepress-doc/assets/js/92.b08449e5.js"><link rel="prefetch" href="/vuepress-doc/assets/js/93.65489d8c.js"><link rel="prefetch" href="/vuepress-doc/assets/js/94.1a3b7200.js"><link rel="prefetch" href="/vuepress-doc/assets/js/95.00a239ab.js"><link rel="prefetch" href="/vuepress-doc/assets/js/96.a7f5e4b8.js"><link rel="prefetch" href="/vuepress-doc/assets/js/97.fbfaeb12.js"><link rel="prefetch" href="/vuepress-doc/assets/js/98.da4f5fde.js"><link rel="prefetch" href="/vuepress-doc/assets/js/99.9520bc03.js">
    <link rel="stylesheet" href="/vuepress-doc/assets/css/0.styles.d770c3b5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-doc/" class="home-link router-link-active"><!----> <span class="site-name">小眯嘻的文档博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress-doc/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="系列笔记" class="dropdown-title"><span class="title">系列笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="系列笔记" class="mobile-dropdown-title"><span class="title">系列笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          综合
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepress-doc/notes/engineering/" class="nav-link">
  前端工程化
</a></li><li class="dropdown-subitem"><a href="/vuepress-doc/notesList/packages/" class="nav-link">
  NPM Packages
</a></li><li class="dropdown-subitem"><a href="/vuepress-doc/notesList/visualization/" class="nav-link">
  可视化
</a></li></ul></li><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepress-doc/notesList/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-subitem"><a href="/vuepress-doc/notesList/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-subitem"><a href="/vuepress-doc/notesList/typescript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-subitem"><a href="/vuepress-doc/notesList/nodejs/" class="nav-link">
  Node.js
</a></li></ul></li><li class="dropdown-item"><h4>
          Vue
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepress-doc/notesList/vue/" class="nav-link">
  全家桶
</a></li><li class="dropdown-subitem"><a href="/vuepress-doc/vue2-source-code/prepare/" class="nav-link">
  Vue2源码学习
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/vuepress-doc/notes/" class="nav-link">
  笔记
</a></div><div class="nav-item"><a href="/vuepress-doc/interview/" class="nav-link">
  知识点
</a></div><div class="nav-item"><a href="/vuepress-doc/blogs/" class="nav-link">
  博客
</a></div><div class="nav-item"><a href="/vuepress-doc/plans/index2.html" class="nav-link">
  计划
</a></div> <a href="https://github.com/lins403/vuepress-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuepress-doc/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="系列笔记" class="dropdown-title"><span class="title">系列笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="系列笔记" class="mobile-dropdown-title"><span class="title">系列笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          综合
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepress-doc/notes/engineering/" class="nav-link">
  前端工程化
</a></li><li class="dropdown-subitem"><a href="/vuepress-doc/notesList/packages/" class="nav-link">
  NPM Packages
</a></li><li class="dropdown-subitem"><a href="/vuepress-doc/notesList/visualization/" class="nav-link">
  可视化
</a></li></ul></li><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepress-doc/notesList/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-subitem"><a href="/vuepress-doc/notesList/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-subitem"><a href="/vuepress-doc/notesList/typescript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-subitem"><a href="/vuepress-doc/notesList/nodejs/" class="nav-link">
  Node.js
</a></li></ul></li><li class="dropdown-item"><h4>
          Vue
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepress-doc/notesList/vue/" class="nav-link">
  全家桶
</a></li><li class="dropdown-subitem"><a href="/vuepress-doc/vue2-source-code/prepare/" class="nav-link">
  Vue2源码学习
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/vuepress-doc/notes/" class="nav-link">
  笔记
</a></div><div class="nav-item"><a href="/vuepress-doc/interview/" class="nav-link">
  知识点
</a></div><div class="nav-item"><a href="/vuepress-doc/blogs/" class="nav-link">
  博客
</a></div><div class="nav-item"><a href="/vuepress-doc/plans/index2.html" class="nav-link">
  计划
</a></div> <a href="https://github.com/lins403/vuepress-doc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>准备</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-doc/vue2-source-code/prepare/" class="sidebar-link">核心模块</a></li><li><a href="/vuepress-doc/vue2-source-code/prepare/directory.html" class="sidebar-link">目录结构</a></li><li><a href="/vuepress-doc/vue2-source-code/prepare/entry.html" class="sidebar-link">入口</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>核心模块</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-doc/vue2-source-code/core/" aria-current="page" class="sidebar-link">概要</a></li><li><a href="/vuepress-doc/vue2-source-code/core/data-driven.html" aria-current="page" class="active sidebar-link">数据驱动</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-doc/vue2-source-code/core/data-driven.html#大致过程" class="sidebar-link">大致过程</a></li><li class="sidebar-sub-header"><a href="/vuepress-doc/vue2-source-code/core/data-driven.html#new-vue" class="sidebar-link">new Vue</a></li><li class="sidebar-sub-header"><a href="/vuepress-doc/vue2-source-code/core/data-driven.html#mergeoptions" class="sidebar-link">mergeOptions</a></li><li class="sidebar-sub-header"><a href="/vuepress-doc/vue2-source-code/core/data-driven.html#挂载" class="sidebar-link">挂载</a></li><li class="sidebar-sub-header"><a href="/vuepress-doc/vue2-source-code/core/data-driven.html#问题" class="sidebar-link">问题</a></li></ul></li><li><a href="/vuepress-doc/vue2-source-code/core/reactive.html" class="sidebar-link">深入响应式原理</a></li><li><a href="/vuepress-doc/vue2-source-code/core/reactivity.html" class="sidebar-link">响应式原理</a></li><li><a href="/vuepress-doc/vue2-source-code/core/components.html" class="sidebar-link">组件化</a></li><li><a href="/vuepress-doc/vue2-source-code/core/compile.html" class="sidebar-link">编译</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>自问自答</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-doc/vue2-source-code/Q&amp;A/" class="sidebar-link">常见面试题</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="数据驱动"><a href="#数据驱动" class="header-anchor">#</a> 数据驱动</h1> <p>数据驱动视图。不用直接修改DOM，只需要修改数据，就可以修改视图。</p> <h2 id="大致过程"><a href="#大致过程" class="header-anchor">#</a> 大致过程</h2> <ol><li>new Vue 实例化</li> <li>init 初始化</li> <li>$mount 实例挂载 【compileTofunctions、mountComponent  &gt;&gt;&gt;  <code>vm._update(vm._render())</code> 】</li> <li>compile 编译 template 生成 render functions【compile（parse、generate）】</li> <li>render 生成 vnode【createElement、createComponent、new VNode】</li> <li>update 中调用 <code>vm.__patch__</code> 更新实例节点 vm.$el</li> <li>patch 中对新旧 vnode 进行 Diff，动态更新【patchVnode、updateChildren、createElm】</li> <li>createElm 中调用 DOM API 来创建真实DOM</li> <li>最终的DOM</li></ol> <p><strong>new Vue =&gt; init =&gt; $mount =&gt; compile =&gt; render =&gt; vnode =&gt; patch =&gt; DOM</strong></p> <h2 id="new-vue"><a href="#new-vue" class="header-anchor">#</a> new Vue</h2> <div class="language-js extra-class"><pre class="language-js"><code>mergeOptions
<span class="token comment">//========================================</span>
<span class="token function">initProxy</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span>	<span class="token comment">// 利用ES6的Proxy特性，为vm实例设置一层代理，这层代理可以为vue在模板渲染成VNode时进行一层数据筛选 （vnode = render.call(vm._renderProxy, vm.$createElement) 在render阶段对不合法的数据做判断和处理 ）</span>
<span class="token function">initLifecycle</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span>
<span class="token function">initEvents</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span>
<span class="token function">initRender</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span>	<span class="token comment">//初始化slot、vm._c、vm.$createElement、vm._vnode、vm.$vnode</span>
<span class="token comment">//========================================</span>
<span class="token function">callHook</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token string">'beforeCreate'</span><span class="token punctuation">)</span>
<span class="token comment">//========================================</span>
<span class="token function">initInjections</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span>
<span class="token function">initState</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span>	<span class="token comment">// props、methods、data、computed、watch</span>
<span class="token function">initProvide</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span>
<span class="token comment">//========================================</span>
<span class="token function">callHook</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token string">'created'</span><span class="token punctuation">)</span>
<span class="token comment">//========================================</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>el<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  vm<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>el<span class="token punctuation">)</span>	<span class="token comment">// 挂载的目标就是把模板渲染成最终的DOM</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="mergeoptions"><a href="#mergeoptions" class="header-anchor">#</a> mergeOptions</h2> <p><code>mergeOptions</code> 主要功能就是把 <code>parent</code> 和 <code>child</code> 这两个对象根据一些合并策略，合并成一个新对象并返回。</p> <p>比较核心的几步，先递归把 <code>extends</code> 和 <code>mixins</code> 合并到 <code>parent</code> 上，然后遍历 <code>parent</code>，调用 <code>mergeField</code>，然后再遍历 <code>child</code>，如果 <code>key</code> 不在 <code>parent</code> 的自身属性上，则调用 <code>mergeField</code>。</p> <p><code>mergeField</code> 函数，它对不同的 <code>key</code> 有着不同的合并策略。</p> <ul><li>data/props/computed/methods/provide/inject，相同 key 的时候 child (instance options) 的值会覆盖 parent (extends、mixins) 的值</li> <li>components/directives/filters，会进行三方合并（constructor、instance、parent）</li> <li>watch/ lifecycle hooks，以数组的方式合并，依次执行，parent优先</li></ul> <h2 id="挂载"><a href="#挂载" class="header-anchor">#</a> 挂载</h2> <p>挂载的目的就是把模板渲染成最终的真实DOM</p> <h3 id="compiler-版本的-mount-实现"><a href="#compiler-版本的-mount-实现" class="header-anchor">#</a> <code>compiler</code> 版本的 <code>$mount</code> 实现</h3> <p>没有定义 <code>render function</code>（hand-written render functions / JSX，后者我猜测通过loader直接编译为了渲染函数），则无论是 el 还是 template，最后都会被调用 compileToFunctions 编译成 render function</p> <h3 id="runtime-版本的-mount-实现"><a href="#runtime-版本的-mount-实现" class="header-anchor">#</a> <code>runtime</code> 版本的 <code>$mount</code> 实现</h3> <p>实际会去调用 <code>mountComponent</code> 方法</p> <p><code>mountComponent</code> 核心就是先实例化一个<code>render Watcher</code>，在它的回调函数中会调用 <code>updateComponent</code> 方法，在此方法中调用 <code>vm._render</code> 方法先生成 <code>VNode</code>，最终调用 <code>vm._update</code> 更新 DOM。</p> <p>创建一个Watcher实例，Watcher的getter为updateComponent (--&gt;vm._update)函数，用于触发所有渲染所需要用到的数据的getter，进行依赖收集</p> <h3 id="vm-render"><a href="#vm-render" class="header-anchor">#</a> <code>vm._render</code></h3> <p>用来把实例渲染成一个虚拟 Node</p> <p>如果没有定义 <code>render function</code>，那么在这之前需要将 template 模板编译为 render function，然后调用<code>vm._render</code> 方法，执行 <code>createElement</code> 方法，最终生成 VNode</p> <div class="language-js extra-class"><pre class="language-js"><code>vnode <span class="token operator">=</span> <span class="token function">render</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>_renderProxy<span class="token punctuation">,</span> vm<span class="token punctuation">.</span>$createElement<span class="token punctuation">)</span>
</code></pre></div><h4 id="createelement"><a href="#createelement" class="header-anchor">#</a> createElement</h4> <ol><li>normalizeChildren，每一个 VNode 可能会有若干个子节点，首先需要对这些子节点进行规范化，例如处理函数式组件，或者编译slot、v-for时产生嵌套数组的情况。(组件的vnode没有children，普通元素节点的vnode才会有)</li> <li>规范化 <code>children</code> 后，接下来会去创建一个 VNode 的实例</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* 根据 tag 的类型 */</span>

<span class="token comment">// platform built-in elements</span>
vnode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VNode</span><span class="token punctuation">(</span>
  config<span class="token punctuation">.</span><span class="token function">parsePlatformTagName</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> children<span class="token punctuation">,</span>
  <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> context
<span class="token punctuation">)</span>

<span class="token comment">// component</span>
vnode <span class="token operator">=</span> <span class="token function">createComponent</span><span class="token punctuation">(</span>Ctor<span class="token punctuation">,</span> data<span class="token punctuation">,</span> context<span class="token punctuation">,</span> children<span class="token punctuation">,</span> tag<span class="token punctuation">)</span>

<span class="token comment">// ...</span>
</code></pre></div><h4 id="virtual-dom"><a href="#virtual-dom" class="header-anchor">#</a> Virtual DOM</h4> <blockquote><p>每个组件或节点都会被编译成render function，然后调用render函数渲染生成VNode，整个页面的组件树就会变成由一个个 VNode 组成的 VNode 树，把它称为 Virtual DOM。所以 vdom 和 vnode 都在用一个原生对象去描述 DOM 树，一种抽象描述，包含了创建 DOM 所需要的信息。</p></blockquote> <p>真正的 DOM 节点非常庞大和复杂，频繁的更新 DOM 会造成很大的性能消耗。</p> <p>Virtual DOM 比创建一个 DOM 的代价要小很多。</p> <p>Virtual DOM 除了它的数据结构的定义，映射到真实的 DOM 实际上要经历 VNode 的 create、diff、patch 等过程。</p> <p><strong>虚拟DOM和真实的DOM的差异</strong>：</p> <ol><li>资源消耗更低</li> <li>执行效率更高。Diff算法比较，策略更新，减少了操作真实DOM的次数</li> <li>可以跨平台。编译成其它平台的系统，例如android、ios</li></ol> <h3 id="vm-update"><a href="#vm-update" class="header-anchor">#</a> <code>vm._update</code></h3> <p>作用是把 VNode 渲染成真实的 DOM。</p> <p><code>_update</code> 的核心就是调用 <code>vm.__patch__</code> 方法，这个方法实际上在不同的平台，比如 web 和 weex 上的定义是不一样的</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// initial render</span>
vm<span class="token punctuation">.</span>$el <span class="token operator">=</span> vm<span class="token punctuation">.</span><span class="token function">__patch__</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$el<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> hydrating<span class="token punctuation">,</span> <span class="token boolean">false</span> <span class="token comment">/* removeOnly */</span><span class="token punctuation">)</span>

<span class="token comment">// patch函数</span>
<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">patch</span> <span class="token punctuation">(</span>oldVnode<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> hydrating<span class="token comment">/*SSR*/</span><span class="token punctuation">,</span> removeOnly<span class="token comment">/*给transition-group用的*/</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h4 id="vm-patch"><a href="#vm-patch" class="header-anchor">#</a> <code>vm.__patch__</code></h4> <ul><li>patch 的过程会调用 <code>createElm</code> 创建元素节点。createElm 通过 VNode 创建真实的 DOM 并插入到它的父节点中，createChildren会递归调用createElm</li> <li>组件更新时也会调用 <code>vm._update</code> 方法，调用 <code>patch</code> 函数，判断新旧VNode的节点是否相同，如果不同则直接替换已存在的节点，如果相同则调用 <code>patchVNode</code> 进行Diff比较，按策略更新节点。</li></ul> <p>更新DOM</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/** Vue.prototype._update **/</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>prevVnode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// initial render</span>
      vm<span class="token punctuation">.</span>$el <span class="token operator">=</span> vm<span class="token punctuation">.</span><span class="token function">__patch__</span><span class="token punctuation">(</span>
        vm<span class="token punctuation">.</span>$el<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> hydrating<span class="token punctuation">,</span> <span class="token boolean">false</span> <span class="token comment">/* removeOnly */</span><span class="token punctuation">,</span>
        vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>_parentElm<span class="token punctuation">,</span>
        vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>_refElm
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// updates</span>
      vm<span class="token punctuation">.</span>$el <span class="token operator">=</span> vm<span class="token punctuation">.</span><span class="token function">__patch__</span><span class="token punctuation">(</span>prevVnode<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>钩子</p> <div class="language- extra-class"><pre class="language-text"><code>// hooks to be invoked on component VNodes during patch
const componentVNodeHooks = {
	init (--&gt;createComponentInstanceForVnode、child.$mount)
	prepatch (--&gt;updateChildComponent)
	insert (--&gt;callHook(componentInstance, 'mounted'))
	destroy (--&gt;$destroy())
</code></pre></div><h2 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h2> <h3 id="数据驱动-2"><a href="#数据驱动-2" class="header-anchor">#</a> 数据驱动</h3> <p>一个vue项目的入口是从实例化new Vue开始的。实例化Vue时，首先进行mergeOptions合并选项，合并来自组件自身的也就是实例options，和使用extends或者mixins拓展的options。</p> <ul><li>mergeOptions合并策略：不同的选项基于不同的合并策略，像是data/props/computed/methods这些呢，如果属性名一样，那么实例options对应的属性值就会覆盖掉拓展的。如果是watch侦听属性或者是lifecycle生命周期，就会以数组的方式进行合并，如果key相同则二者都会被保留，执行的时候拓展的options会先执行，然后再执行实例options的。还有一种情况是components和directives这些选项，还会和全局Vue中对应的选项，进行一个三方合并。这是实例化Vue首先进行的mergeOptions。</li></ul> <p>然后下一步就去初始化化生命周期钩子、事件、render等等，为后续做铺垫。</p> <p>紧接着调用生命周期的beforeCreate钩子，然后就开始实例化数据了。首先在初始化状态前先initInjections，然后初始化state，包含props、methods、data、computed、watch等等，然后再initProvide。</p> <ul><li>初始化状态最主要做了两件事情，一个是将props、computed以及methods经过标准化以后，绑定到实例上，就能作为实例属性直接访问，第二个是对它们以及data中的属性进行数据劫持，也就是把它们变成响应式对象。完成这个阶段的初始化以后，就会触发生命周期的created钩子，这时候代码就能访问到数据了。</li></ul> <p>完成初始化状态以后，判断如果实例的option中有el节点属性，就会将实例去挂载到这个DOM节点上，如果没有的话，那通常就是开发的时候，实例化以后去手动挂载，到那个时候也会将实例挂载到DOM上。挂载入口是从调用$mount方法开始。</p> <p><code>$mount</code>方法主要有两个版本，只有runtime运行时的版本（核心是调用<code>mountComponent</code>，然后执行render方法生成vnode，调用update将vnode渲染为真实DOM），和带有compiler和runtime的版本。</p> <ul><li>前者通常用在工程化项目上，使用webpack时集成了Vue-loader，会把template自动编译成render function，就不需要在运行的时候先进行编译。然后不同的平台，使用的运行时不一样，比如web浏览器和weex移动端。</li></ul> <p>有compiler的版本，如果没有定义render function，就会将template模板字符串parse解析生成AST，然后优化AST，标记AST中可以优化的节点，也就是不涉及数据变化的静态节点在每次渲染时生成的DOM都是一致的，比如纯文本节点，使用了v-pre指令的节点。</p> <ul><li>hand-written render functions / JSX</li> <li>parse 的过程：利用正则表达式顺序解析模板，当解析到开始标签、闭合标签、文本的时候都会分别执行对应的回调函数，来实现构造 AST 树。</li> <li>optimize优化的过程：会进行两轮深度遍历，遍历每一个元素节点，先标记出静态子节点，然后根据这个结果再标记出静态根节点。在第一次render的时候，静态根节点的vnode就会被缓存，在第一次patch生成DOM以后的每次patch都会跳过静态根节点。</li></ul> <p>然后根据优化后的AST，generate生成render function。</p> <ul><li><p>使用了with语法拼接generate生成的代码，变为一串字符串形式的可执行代码。</p></li> <li><p>generate的过程：先处理一下options，然后调用genElement处理指令、slot、动态组件等，对每个AST节点生成代码。</p></li></ul> <p>执行完成编译的逻辑以后，会去执行runtime版本的mount，就是去调用mountComponent方法，触发生命周期的beforeMount钩子，创建一个Render Watcher，执行watcher的getter方法，这将执行render function，然后访问其中每个使用到的实例属性，触发这些属性的getter，用来依赖收集。然后将执行生成的vnode传给update方法，最终渲染成真实DOM。</p> <ul><li>vnode、vdom：每个组件或节点都会被编译成render function，执行render函数时会调用createElement方法生成VNode，整个页面的组件树就会变成由一个个VNode组成的VNode树，建立起来的这棵树也就是Virtual DOM。vnode和vdom都是在用一个JavaScript对象去描述DOM树，是一种抽象描述，包含了创建真实DOM所需要的信息。
<ul><li>Virtual DOM是Vue2版本的重大更新，它的优势在于，对比真实DOM，创建虚拟DOM的资源消耗更低，不需要频繁操作DOM，执行效率更高。还有个好处在于，虚拟DOM可以被用于实现SSR，以及跨平台的UI渲染，例如web端和移动端。</li></ul></li> <li>Render Watcher的getter方法updateComponent，会去调用_update方法，核心是调用patch方法.</li> <li>patch方法中，如果是首次渲染，则直接调用createElm方法创建一个节点，最后使用浏览器的DOM API添加到真实DOM上，完成挂载，触发生命周期的mounted钩子。如果是更新响应式数据触发组件更新的情况，就会在内部使用sameVNode判断新旧VNode是否相同，来使用不同的更新逻辑。
<ul><li>如果新旧vnode不同，更新的逻辑就是创建新节点，更新父的占位符节点，删除旧节点（触发生命周期destroy钩子）
<ul><li>占位符节点指的是组件vnode的tag，用来标识这一串的vnode是属于哪一个组件的</li></ul></li> <li>如果新旧vnode相同，会调用patchVnode，更新的逻辑就是将新vnode patch到旧vnode上去。在patch前后会执行对应的钩子函数。最复杂的情况是都存在子节点，就需要调用updateChildren来Diff遍历比较子节点，通过调整节点顺序复用旧节点，以及插入和删除节点，最终完成DOM更新。</li></ul></li></ul> <h3 id="响应式"><a href="#响应式" class="header-anchor">#</a> 响应式</h3> <p>重写数组原型方法，因为不能侦听到数组长度的变化，而数组的实例方法会中会影响原数组的方法只有有限的7个，再考虑到数组可扩展性很强，如果数据量很大，重写原型方法这种方式性价比很高。</p> <h3 id="组件"><a href="#组件" class="header-anchor">#</a> 组件</h3> <h3 id="生命周期"><a href="#生命周期" class="header-anchor">#</a> 生命周期</h3></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/lins403/vuepress-doc/edit/master/docs/vue2-source-code/core/data-driven.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/10/2022, 7:38:00 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vuepress-doc/vue2-source-code/core/" class="prev router-link-active">
        概要
      </a></span> <span class="next"><a href="/vuepress-doc/vue2-source-code/core/reactive.html">
        深入响应式原理
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/vuepress-doc/assets/js/app.9fb27f3b.js" defer></script><script src="/vuepress-doc/assets/js/2.92a218c7.js" defer></script><script src="/vuepress-doc/assets/js/185.a670aec3.js" defer></script>
  </body>
</html>
